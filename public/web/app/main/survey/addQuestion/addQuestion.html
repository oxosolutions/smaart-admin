<div class="page-layout carded fullwidth single-scroll pb-30" layout="row">

    <!-- TOP BACKGROUND -->
    <div class="top-bg md-accent-bg"></div>
    <!-- / TOP BACKGROUND -->

    <!-- CENTER -->
    <div class="center" flex>

        <!-- CONTENT HEADER -->
        <div class="goal-header" layout="column">
            <div flex>
                <span class="h2 white-fg">Manage Survey Sections</span>
            </div>
        </div>
        <!-- / CONTENT HEADER -->
        <style type="text/css">
            .dataTables_wrapper .top {
                border-bottom: 1px solid #e8e8e8;
                padding: 0 0 24px 0;
            }
            
            .dataTables_wrapper .dataTables_filter input {
                width: 225px;
            }
            
            .goal-header {
                height: 75px;
                min-height: 75px;
                max-height: 90px;
                padding: 24px;
            }
            
            .action-separator {
                color: #787878;
                padding: 0 4px;
            }
            
            .page-layout .top-bg {
                height: 139px;
            }
            .group-frame{
                overflow: hidden;
                height: 50px;
            }
            .countNumber{
                cursor: move;
            }
            .addQuestion_right_section > div > div , .div-two{
                display: none;
            }
           .select2-container a{
               border: none !important;
               background:#fff  !important;
               border-bottom: 1px solid #e1e1e1;
            }
           
            .select2-arrow{
                background: #fff !important;
                border-left: none !important;
            }
            .select2-arrow b:after{
               display: block;
               content: '\25BC';
               position:relative;
               top:2px;
               speak:none;
               font-size: 13px;
               transform: scaleY(0.5) scaleX(1);
            }
            .select2-container{
                border-bottom: 1px solid #e1e1e1 !important;
            }
            .questType , .pattern , .required, .allSelects{
            	border: none !important;
               	background:#fff  !important;
               	border-bottom: 1px solid #e8e8e8;
            }
            .text-field-design{
                border:1px solid hsla(0, 0%, 0%, 0.12) !important;
            	border-width: 1px !important;
    			padding :8px !important;
    			
            }
            .text-field-design:focus{
                border:2px solid $e1e1e1 !important;
                border-width: 1px !important;
                padding :8px !important;
                box-shadow: 0px 0px 5px 3px #ededed;
                
            }
            textarea{
                border:1px solid hsla(0, 0%, 0%, 0.12) !important;
                border-width: 1px !important;
                padding :8px !important;
            }
            textarea:focus{
                 border:1px solid #e1e1e1 !important;
                border-width: 1px !important;
                padding :8px !important;
                box-shadow: 0px 0px 5px 3px #ededed;
            }
            md-input-container{
                margin-top: 8px
            }
            .none{
                display: none;
            }
        </style>

        <!-- CONTENT CARD -->
        <div class="content-card">
            
            <!-- CONTENT TOOLBAR -->
            <div class="toolbar" layout="row" layout-xs="column" layout-align="start center">
                <div flex="20" layout="row" layout-align="start center" class="pv-30 h3" hide-xs  ng-controller="EditSurveyController"  >
                    <h3 class=" ">Survey : <span>{{surveyDataForEdit.response.name}}</span></h3>
                </div>
                <div flex ng-controller="EditSurveyController">
                   <!--  <a ui-sref="app.survey_edit({id:id.id})" id="{{id.id}}/">
                        <md-button class=" md-accent md-raised ph-15" aria-label="all surveys"><md-tooltip md-direction="top" class="md-body-1">Edit this survey</md-tooltip>Edit Survey</md-button>
                    </a>
                    <a href="survey/add">
                        <md-button class=" md-accent md-raised ph-15" aria-label="all surveys"><md-tooltip md-direction="top" class="md-body-1">Add a new survey </md-tooltip>Add Survey</md-button>
                    </a>
                    <a href="survey/list">
                        <md-button class=" md-accent md-raised ph-15" aria-label="all surveys"><md-tooltip md-direction="top" class="md-body-1">view list of all surveys </md-tooltip>All Surveys</md-button>
                    </a> -->
                    <div layout="row" layout-align="end center" ng-include="'app/main/survey/_include.html'"></div>
                </div>
            </div>
            <!-- / CONTENT TOOLBAR -->
            <!-- CONTENT -->
            <md-content class="content" ms-scroll>
                <div flex="100" layout-align="start start">
                    <div class="group-div">
                        <div md-whiteframe="2" class="repeat mt-10 group-frame groupFrameDiv" id="1" flex="100" data-number="1" style="background-color: #fff">
                            <div layout="row">
                                <div class="md-accent-bg ph-10 pv-5 md-headline chartCount mt-5 countNumber">1</div>
                                <div flex="70" class="md-subhead pl-10 group_title" layout="row" layout-align="start center">
                                    <!-- {{group_title | htmlToPlaintext}} -->

                                </div>
                                <script>    

                                    $(document).ready(function(){
                                        // $('.group_title').html($('.group_title').parent().parent().parent().find('.groupName').val());
                                        // $('.groupFrameDiv').closest('.group_title').append();
                                      
                                       $(document).on('keyup','.groupName',function(){
                                        var current_val = $(this).val();
                                        var append_here = $(this).parents('.groupFrameDiv').find('.group_title');
                                            $(append_here).html(current_val);
                                             // alert($('.groupName').val());
                                       });
                                    });
                                    $(document).on('click','button[name=insertImage]',function(event){
                                        event.preventDefault();
                                        $('.add_media').click();
                                    });
                                    $(document).on('click','.ng-valid-parse',function(event){
                                        $(this).addClass('currentSelectionForEditor');
                                    });

                                   
                                </script>
                                <div flex="30" layout="row"  layout-align="end center" class="pr-10 icon-arrow">
                                    <span class="text-boxed teal-bg white-fg font-size-16" style="font-family: serif;font-size: 14px"><i class="fields_count">0</i> Fields</span>
                                    <md-button class="md-fab md-mini add_fields" aria-label="Eat cake" >
                                        <md-tooltip md-direction="top" class="md-body-1">Add fields</md-tooltip>
                                        <md-icon md-font-icon="icon-plus"></md-icon>
                                    </md-button>
                                    <md-button class="md-icon-button delete-group" aria-label="delete group"><md-tooltip md-direction="top" class="md-body-1">Delete Section</md-tooltip><md-icon md-font-icon="icon-trash"></md-icon></md-button>
                                    <span>
                                    <img src="assets/images/arrow-down.png" class="group_accordion_img" style="width: 18px;cursor: pointer;"><md-tooltip md-direction="top" class="md-body-1">Minimize / Maximize</md-tooltip>
                                    </span>
                                   
                                </div>
                                
                            </div>
                            <div flex="100" class="ph-20">
                                <div layout="column" layout-align="center stretch" class="mv-20">	
                                    <label class="font-size-14 font-weight-300 grey-600-fg mb-10">Section Name</label>
                                    <input type="text" name="name" class="groupName text-field-design" aria-label="name" />
                                    <input type="hidden" name="sectionId" class="sectionId" value="" />
                                </div>
                                <label class="font-size-14 font-weight-300 grey-600-fg">Description</label>
                                <md-input-container class="md-block">
                                    
                                    <textarea class="groupDescription" rows="3" md-select-on-focus aria-label="groupDescription"></textarea>
                                </md-input-container>
                            </div>
                            <!-- question div -->
                        </div>
                    </div>
                    <div flex="100" layout="row" layout-align="center center" class="font-size-26 grey-400-fg font-weight-300 survey_group_error" >
                        <div style="border:1px dashed #a8a8a8;text-align: center;" class="ph-60 pv-20 ">
                            <p>Currently there is no group available,</p>
                            <p>Please click on add group button to create a new group.</p>    
                        </div>
                        
                    </div>
                    <md-progress-circular md-mode="indeterminate" md-diameter="20" ng-show="isLoading"></md-progress-circular>

                    <md-button class="md-accent md-raised white-fg mt-15 ph-15 mh-0" ng-click="saveSurvey(survey)">
                        Save Section
                    </md-button>
                    <md-button class="md-primary md-raised white-fg mt-15 add-group ph-15 mh-0" style="float: right" >
                         Add Section
                    </md-button>   
                        
                </div>
            </md-content>
            <!-- / CONTENT -->
        </div>
        <!-- / CONTENT CARD -->
    </div>
    <!-- / CENTER -->
</div>
